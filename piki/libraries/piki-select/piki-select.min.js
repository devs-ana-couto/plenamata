var PikiSelect;!function($){PikiSelect={configure:function(e){e.$=e.$||$(e);var t=e.$.data("PikiSelect");if(void 0===t){(t={_:e,$:e.$.addClass("piki-select"),$label:null,$wrapper:$('<div class="j-custom-select-holder" />').insertBefore(e.$),$selected:null,$options:e.$.children("option"),$label:$('<div class="text"></div>'),$labelInner:$("<span></span>"),$picker:$('<span class="picker"></span>'),autosize:!1!==e.$.data("autosize")}).$.appendTo(t.$wrapper),t.$wrapper.attr("tabindex",1).attr(e.$.attr("class")),t.$label.appendTo(t.$wrapper),t.$labelInner.appendTo(t.$label),t.$picker.appendTo(t.$wrapper),e.$.data("PikiSelect",t),e.$.prop("disabled")&&t.$wrapper.addClass("disabled"),this.resize(t),t.$.on("focus",function(){$(document).on("keyup.PikiSelect",function(){PikiSelect.event(t)})}),t.$.on("focusout",function(){$(document).off("keyup.PikiSelect",function(){PikiSelect.event(t)})});var i=t.$options.filter(":selected"),l=i.length?i.html():t.$options.first().html();t.$labelInner.html(l),e.$.on("change.PikiSelect",function(){PikiSelect.onChange(t)}),e.$.on("actualize",function(){e.$.data("PikiSelect",t);PikiSelect.actualizeLabel(t)})}},onChange:function(data){data.lastValue=data.$.val(),PikiSelect.actualizeLabel(data);var fieldId=data.$.attr("id");void 0!==fieldId&&fieldId.lastIndexOf("[")&&(fieldId=fieldId.replace("[","").replace("]",""));var functionString="pikiSelect__"+fieldId;"function"==eval("typeof "+functionString)&&eval(functionString+"( data )")},actualizeLabel:function(e){e.$.prop("disabled")?e.$wrapper.addClass("disabled"):e.$wrapper.removeClass("disabled"),e.selected=e.$.find('option[value="'+e.$.val()+'"]'),e.labelText=e.selected.length?e.selected.html():e.$options.first().html(),e.$label.html(e.labelText)},resize:function(e){if(e.autosize){if(!(parseInt(e.$.css("width"))>0)){var t=e.$wrapper.clone().css({position:"absolute",top:0,left:0,visibility:"hidden",display:"block",width:"100%"}).appendTo("body"),i=t.find(".text").first().css({width:"auto",display:"table"}),l=t.find("select").first(),a=0;l.children("option").each(function(){this.$=this.$||$(this),i.children("span").html(this.$.html()),i.outerWidth()>a&&(a=i.outerWidth())}),l.remove(),e.$label.css({width:a,display:"block"}),e.$wrapper.css({width:a}),e.$.css("width","100%")}}},event:function(e,t){e.keyCode>=37&&e.keyCode<=40&&t.$label.html(t.$options.filter(":selected").html())},labelWidth:function(e){for(var t=0,i=e.options.length,l=0;l<i;l++)if(e.$labelInner.html(e.$options.get(l).html()),e.label.outerWidth()>t&&(t=e.label.outerWidth()),l==i-1)return t},val:function(e,t){void 0==t&&(t=e.$.find("option:selected").val()),void 0==t&&(t=e.$.find("option").first().val()),e.$.val(t);var i=e.$.find("option:selected").html();e.$labelInner.html(i)},disable:function(e){e.$.prop("disabled","disabled"),e.$wrapper.addClass("disabled")},enable:function(e){e.$.prop("disabled",!1),e&&e.$wrapper.removeClass("disabled")},populate:function(e,t,i){var l;l=void 0!==i&&!0===i?e.$.find("option").first().clone():"",e.$.html("").append(l),$.each(t,function(t,i){e.$.append('<option value="'+t+'">'+i+"</option>")})},removeItems:function(e){PikiSelect.disable(e),e.$.find("option").each(function(e){this.$=this.$||$(this),e>0&&this.$.remove()}),PikiSelect.val(e,e.$.find("option").first().val()),PikiSelect.enable(e)}},window.init_custom_selectboxes=function(){var e=$("select");e.length&&e.each(function(){PikiSelect.configure(this)})}}(jQuery);