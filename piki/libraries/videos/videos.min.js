var Videos;!function(e){Videos={players:[],timeout:!1,init:function(t){var i=e.extend({},{context:!1,itemSelector:".video-wrapper",titleSelector:!1,triggerSelector:"self",closeLabel:"fechar",closePosition:"relative",htmlFooter:!1,items:!1,autoPlay:!1,showInfo:!1,openInModal:!0,onStateChange:!1,onReady:!1},t);if(i.playing=!1,!1===i.context?i.context=e("body"):i.context=e(i.context),i.items=e(i.itemSelector,i.context),!i.items)return i;i.items.each(function(t){this.$=this.$||e(this);var o={item:this.$,disabled:!1,configured:!1,videoReady:!1,forcedPause:!1,index:t,videoCode:!1,autoplay:this.$.data("autoplay")&&!1!==this.$.data("autoplay"),$video:this.$.find("video"),title:!1,$trigger:!1,openInModal:i.openInModal,onStateChange:i.onStateChange,onReady:i.onReady};if(i.titleSelector){var a=e(i.titleSelector,this.$);a.length&&(o.title=a.html())}void 0!==this.$.data("open-in-modal")&&(o.openInModal=this.$.data("open-in-modal")),"self"!==i.triggerSelector?o.$trigger=e(i.triggerSelector,this.$):o.$trigger=this.$,o.$video.length&&(o.videoCode=o.$video.data("video-code"),o.$trigger.on("click",function(e){e.preventDefault(),o.disabled=!0,"self"!==i.triggerSelector&&o.$trigger.stop().fadeOut(),Videos.startVideo(i,o)})),this.$.data("Videos",o)}),e("body").on("click",function(t){t.target.$=t.target.$||e(t.target),t.target.$.hasClass("controll-button")||t.target.$.hasClass("icon-arrow-right3")||Videos.pauseVideos()})},videoOpen:function(t,i){var o=e('<div class="video-wrapper" id="video-wrapper-'+i.videoCode+'" rel="'+i.videoCode+'"></div>');i.$video.clone().show().attr("id","video-"+i.videoCode).appendTo(o);this.modal.get(t,{onClose:function(){Videos.pauseVideos(),t.playing=!1}}),i.title&&this.modal.setTitle(i.title),this.modal.addVideo(o),this.modal.showLoader(),this.APIWait(function(){i.player=new YT.Player("video-"+i.videoCode,{height:"100%",width:"100%",videoId:i.videoCode,playerVars:{autoplay:t.autoPlay,showinfo:t.showInfo,rel:0},events:{onReady:function(e){i.videoReady=!0,i.item.pikiLoader("close"),!1!==i.onReady&&i.onReady(i)},onStateChange:function(e){Videos.videoStateChange(e,i,t),!1!==i.onStateChange&&i.onStateChange(i)}}})}),i.configured=!0,Videos.players.push(i),this.modal.open(i)},modal:function(){return{_data:!1,_timeout:!1,_this:this,get:function(t,i){if(this._data)return this._data;this._data=e.extend({onClose:!1},i),this._data.$=e("<div />",{class:"videos-modal",css:{zIndex:99998}}),this._data.$header=!1,this._data.$title=!1,this._data.$footer=!1,this._data.$.appendTo(_body),this._data.$inner=e('<div class="videos-modal-inner" />').css({zIndex:99999}).appendTo(this._data.$),this._data.$header=e('<header class="clear" />').appendTo(this._data.$inner),this._data.$title=e('<div class="title" />').appendTo(this._data.$header);var o="absolute"===t.closePosition?this._data.$:this._data.$header;return this._data.$close=e('<button class="close-button native '+t.closePosition+'">'+t.closeLabel+'<span class="icone"></span></button>').prependTo(o),this._data.$content=e('<div class="videos-modal-content" />').appendTo(this._data.$inner),this._data.$video=e('<div class="videos-modal-video" />').appendTo(this._data.$content),t.htmlFooter&&(this._data.$footer=e('<footer class="clear" />').appendTo(this._data.$inner),this._data.$footer.html(t.htmlFooter)),this._data.$.on("click",".close-button",function(e){e.preventDefault(),_this.close()}),this._data},showLoader:function(){this._data.$video.children().hide(),this._data.$video.pikiLoader()},setTitle:function(e){this._data.$title.html(e)},addVideo:function(e){this._data.$video.children().hide(),e.appendTo(this._data.$video).show()},open:function(e){this.disableScroll();this._data.$video.children().hide().filter('[rel="'+e.videoCode+'"]').show(),this._data.$.fadeIn(),this.keepVisible()},close:function(){this._data.onClose&&this._data.onClose(),this.enableScroll(),this._data.$.fadeOut()},keepVisible:function(){_this=this,_window.bind("resize",function(){_this._timeout&&clearTimeout(_this._timeout),_this._timeout=setTimeout(function(){_this.ajustSize()},50)}).resize()},ajustSize:function(){this._data.$.innerWidth();var e=this._data.$.innerHeight();this._data.$inner.css("margin-top",0);var t=this._data.$inner.outerWidth(),i=this._data.$header.outerHeight();this._data.$footer&&(i+=this._data.$footer.outerHeight());if(t/(o=e-i)<16/9)var o=Math.ceil(t/(16/9));this._data.$video.css("height",o+"px");var a=this._data.$inner.outerHeight();if(a<e){var d=Math.round((e-a)/2);this._data.$inner.css("margin-top",d+"px")}},disableScroll:function(){document.getElementsByTagName("body")[0].style.overflowY="hidden",document.getElementsByTagName("html")[0].style.overflowY="hidden"},enableScroll:function(){document.getElementsByTagName("body")[0].style.overflowY="auto",document.getElementsByTagName("html")[0].style.overflowY="auto"}}}(),resumeVideo:function(e){Videos.pauseVideos();var t=e.$slides.eq(e.playing).data("Videos");void 0!==t&&!0===t.forcedPause&&this.playVideo(e,t)},playVideo:function(e,t){!0===t.openInModal&&this.modal.open(t),t.player.playVideo()},pauseVideos:function(){var e=Videos.players.length;if(!(e<1))for(var t=0;t<e;t++){var i=Videos.players[t];void 0!==i.player.getPlayerState&&(i.player.getPlayerState()===YT.PlayerState.PLAYING&&(i.forcedPause=!0,i.player.pauseVideo()))}},startVideo:function(e,t){!1===t.configured?Videos.configureVideo(e,t):this.playVideo(e,t),e.playing=t.index},configureVideo:function(e,t){if(!1!==t.videoCode)return!0===t.openInModal?this.videoOpen(e,t):("self"!==e.triggerSelector&&t.$trigger.stop().fadeOut(),Videos.APIWait(function(){t.player=new YT.Player(t.$video.attr("id"),{height:"100%",width:"100%",videoId:t.videoCode,playerVars:{autoplay:1,rel:0,showinfo:0,controls:1,modestbranding:1},events:{onReady:function(e){t.videoReady=!0,t.item.pikiLoader("close")},onStateChange:function(i){Videos.videoStateChange(i,t,e)}}}),t.configured=!0,Videos.players.push(t)})),t},videoStateChange:function(e,t,i){var o=e.target.getPlayerState();o===YT.PlayerState.PLAYING&&(i.playing!==t.index?(e.target.pauseVideo(),t.forcedPause=!0):t.forcedPause=!1),o===YT.PlayerState.PAUSED||o===YT.PlayerState.ENDED?(t.disabled=!1,"self"!==i.triggerSelector&&t.$trigger.fadeIn()):(t.disabled=!0,"self"!==i.triggerSelector&&t.$trigger.fadeOut())},APIWait:function(e){"undefined"==typeof YT||void 0===YT.Player?(Videos.timeout&&clearTimeout(Videos.timeout),Videos.timeout=setTimeout(function(){Videos.APIWait(e)},50)):(clearTimeout(Videos.timeout),e())}}}(jQuery);