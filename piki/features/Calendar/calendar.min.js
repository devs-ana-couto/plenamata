!function(t){var e={configure:function(e){return this.each(function(){var a=t.extend({},{afterLoad:!1,afterChange:!1},e);a.$=t(this),a.self=this,a.interval=!1,a.actualYear=a.$.attr("actual-year"),a.actualMonth=a.$.attr("actual-month"),a.controls={wrapper:a.$.children(".navigation")},a.controls.prev=t("a.left",a.controls.wrapper),a.controls.next=t("a.right",a.controls.wrapper),a.controls.label=t(".desc-date",a.controls.wrapper),a.controls.prev.on("click",function(t){t.preventDefault(),a.controls.prev.is("disabled")||a.$.Calendar("getPrevMonth")}),a.controls.next.on("click",function(t){t.preventDefault(),a.controls.next.is("disabled")||a.$.Calendar("getNextMonth")}),a.openText="Abrir calendário",a.closeText="Fechar calendário",a.toggleButton=t('<span class="toggle-button"><span>'+a.openText+"</span></span>").appendTo(a.$),a.toggleButton.bind("click",function(t){t.preventDefault(),a.$.is(".opened")?(a.$.removeClass("opened"),a.toggleButton.html("<span>"+a.openText+"</span>")):(a.$.addClass("opened"),a.toggleButton.html("<span>"+a.closeText+"</span>"))}),a.gridDays=a.$.children(".grid-days"),a.actualizeDays=function(){a.allDays=a.gridDays.children("span"),a.actualDays=a.allDays.filter(".atual")},a.actualizeDays(),a.showLoader=function(){a.$.pikiLoader({position:"absolute"})},a.hideLoader=function(){a.$.pikiLoader("close")},a.resize=function(){(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=640?a.$.Calendar("setMobile"):a.$.Calendar("setDefault")},!1!==a.afterLoad&&a.afterLoad.call(this,a),a.$.data("Calendar",a),t(window).bind("resize",function(){a.$.Calendar("resizeBind")}).resize()})},setMobile:function(t){t.$.addClass("mobile")},setDefault:function(t){t.$.removeClass("mobile")},close:function(t){},open:function(t){},getNextMonth:function(t){return this.each(function(){t.actualMonth++,13===t.actualMonth&&(t.actualMonth=1,t.actualYear++),t.$.Calendar("requestCalendar",t.actualYear,t.actualMonth)})},getPrevMonth:function(t){return this.each(function(){t.actualMonth--,0===t.actualMonth&&(t.actualMonth=12,t.actualYear--),t.$.Calendar("requestCalendar",t.actualYear,t.actualMonth)})},requestCalendar:function(e,a,n){return this.each(function(){e.showLoader(),t.ajax({type:"POST",url:Piki.ajaxurl,dataType:"JSON",data:{action:"calendar_get_month",year:a,month:n},beforeSend:function(t){t.overrideMimeType("text/plain; charset=utf-8")}}).done(function(t){e.gridDays.html(t.days),e.controls.label.html(t.year+" "+t.month),e.actualizeDays(),e.hideLoader(),!1!==e.afterChange&&e.afterLoad.call(e.self,e)})})},resizeBind:function(t){return this.each(function(){clearTimeout(t.timeout),t.timeout=setTimeout(t.resize,200)})}};t.fn.Calendar=function(t){var a=this.data("Calendar");if(void 0===a)return e.configure.apply(this,arguments);if(e[t]){var n=Array.prototype.slice.call(arguments,1);return n.unshift(a),e[t].apply(this,n)}}}(jQuery);