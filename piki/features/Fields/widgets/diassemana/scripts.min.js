!function($){$.fn.UFCidade=function(method){var pluginArgs=arguments;return this.each(function(){var field=this,$this=$(this);this.configure=function(){this.estados=$("select.estado",$this),this.cidades=$("select.cidade",$this),this.target=$(".target-field",$this),this.preloader=$(".preloader",$this),this.estados.data("ufcidade",{target:$this}),this.cidades.data("ufcidade",{target:$this}),"0"!=this.estados.val()&&"0"==this.cidades.val()&&this.changeEstado(),this.estados.on("change",function(){field.changeEstado()}),this.cidades.on("change",function(){field.setCidade()}),this.ready=!0},this.changeEstado=function(){this.clearCidades(),this.getCidades()},this.clearCidades=function(){this.cidades.find("option").first();this.preloader.css("display","inline-table"),this.cidades.pikiSelect("removeItems").pikiSelect("disable"),this.estados.pikiSelect("disable"),this.setCidade()},this.setCidade=function(){this.target.val(this.estados.val()+"/"+this.cidades.val())},this.getCidades=function(){if("0"==this.estados.val())return this.clearCidades(),this.estados.pikiSelect("enable"),this.cidades.pikiSelect("disable"),void this.preloader.css("display","none");$.ajax({type:"POST",url:Piki.ajaxurl,dataType:"JSON",data:{action:"piki_field_ajax",field_type:"ufcidade",field_action:"ajax_get_cidades",estado:field.estados.val()},beforeSend:function(i){i.overrideMimeType("text/plain; charset=utf-8")}}).done(function(i){field.pululateCidades(i),field.estados.pikiSelect("enable"),field.preloader.css("display","none")})},this.pululateCidades=function(i){this.cidades.pikiSelect("populate",i,!0).pikiSelect("enable")};var toCall;void 0==(toCall=eval("this."+method))&&void 0==this.ready?this.configure.apply(this,pluginArgs):toCall.apply(this,Array.prototype.slice.call(pluginArgs,1))})},$(function(){$(".linha-field.ftype-ufcidade > .field-item").UFCidade()})}(jQuery);