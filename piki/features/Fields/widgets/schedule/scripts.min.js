var ScheduleField;!function(e){ScheduleField={init:function(){var i=e("div.schedule-field-wrapper");i.length&&i.each(function(){this.$=this.$||e(this),ScheduleField.configure(this)})},configure:function(e){var i={_:e,$:e.$,$interval:e.$.find("#schecule-interval").first(),$specifics:e.$.find("#schecule-specifics").first(),defaultItem:e.$.data("default-item")};i.$weekdays=i.$interval.find(".piki-sanfona").first(),i.$headChecks=i.$interval.find("input.head-check"),e.$.data("ScheduleField",i),ScheduleField.initSanfonas(i),ScheduleField.bindTabs(i),ScheduleField.Hours.init(i),ScheduleField.Calendar.init(i)},bindTabs:function(i){i.$headChecks.on("change",function(){this.$=this.$||e(this);var t=this.$.parent(".sanfona-header");if(!1===this.$.prop("checked")){if(t.find("button").removeClass("active"),t.hasClass("opened")){var a=i.$weekdays.data("PikiSanfona");PikiSanfona.closeAll(a)}}else ScheduleField.Hours.checkHours(i,t.get(0).target)})},initSanfonas:function(i){i.$.pikiSanfona({items:">div",headers:">h2",contents:">div",style:"abas",lockHash:!0,defaultItem:i.defaultItem,onOpen:function(){console.log("muda campo que indentifica a opção escolhida.")},breakpoint:{width:1230,style:"sanfona"}}),i.$weekdays.pikiSanfona({items:">div",headers:">div.tab",triggers:"button",contents:">div.entry-content",style:"abas",defaultItem:0,effect:!1,effectDuration:300,beforeOpen:function(e,i){i.get(0).header.find('input[type="checkbox"]').prop("checked",!0),ScheduleField.Hours.checkHours(e,i)},afterInit:function(i){i.$contents.each(function(t){this.$=this.$||e(this),0!==t&&ScheduleField.Hours.checkHours(i,this.$)})},breakpoint:{width:1230,style:"sanfona"}})},Hours:{init:function(i){i.$interval.on("keypress focus focusout blur","input.ftype-horario",function(t){this.$=this.$||e(this),ScheduleField.Hours.checkHours(i,this.$)}),i.$interval.on("click",'button[data-action="add-horario"]',function(t){t.preventDefault(),this.$=this.$||e(this),ScheduleField.Hours.duplicateHour(i,this.$)}),i.$interval.on("click",'button[data-action="remove-horario"]',function(t){t.preventDefault(),this.$=this.$||e(this),this.$w=this.w||this.$.parent(".line-value"),ScheduleField.Hours.removeHour(i,this.$w)})},duplicateHour:function(e,i){var t=i.siblings(".line-value").first().clone(),a=t.children("input").val("").removeClass("masked");t.hide().insertBefore(i).show(),a.focus()},removeHour:function(e,i){var t=i.parents(".horarios").first();i.siblings(".line-value").length?i.stop(!0,!0).remove():i.children("input").val(""),ScheduleField.Hours.checkHours(e,t)},checkHours:function(i,t){t.hasClass("sanfona-item")||(t=t.parents(".sanfona-item").first());var a=!0;t.find('.horarios input[type="text"]').each(function(){if(this.$=this.$||e(this),""!==this.$.val())return a=!1,!1});var c=t.get(0).header.find("button");a?c.removeClass("active"):c.addClass("active")}},Calendar:{init:function(i){i.Specifics={actualDate:!1,$calendar:e("#calendar-field-programacao",i.$specifics).first(),$horarios:e(".horarios-wrapper",i.$specifics).first()},i.Specifics.$legend=e("legend strong",i.Specifics.$horarios).first(),i.Specifics.$model=e(".line-value.model",i.Specifics.$horarios).first().clone(),e(".line-value.model",i.$specifics.$horarios).hide(),i.Specifics.$calendar.Calendar({afterLoad:function(e){ScheduleField.Calendar.checkDates(i)},afterChange:function(e){ScheduleField.Calendar.checkDates(i)},onChangeDate:function(e){ScheduleField.Calendar.selectDay(i,e)}}),i.Specifics.$add=e('[data-action="add-horario"]',i.Specifics.$horarios),i.Specifics.$add.on("click",function(e){ScheduleField.Calendar.duplicate(i)}),i.Specifics.$horarios.on("click",'[data-action="remove-horario"]',function(t){this.$=this.$||e(this),ScheduleField.Calendar.removeHour(i,this.$)})},selectDay:function(i,t){if(i.Specifics.actualDate=t.selectedDate,i.Specifics.actualDate){var a=t.selectedDate.split("-").pop()+", "+t.controls.label.text();i.Specifics.$legend.text(a)}var c=e(".line-value",i.Specifics.$horarios).hide().filter('[rel="'+i.Specifics.actualDate+'"]');c.length?c.show():ScheduleField.Calendar.duplicate(i),ScheduleField.Calendar.checkDates(i)},removeHour:function(e,i){var t=i.parent();t.siblings('[rel="'+t.attr("rel")+'"]').length?t.remove():t.find("input").val("")},duplicate:function(i){var t=i.Specifics.$model.clone().attr("rel",i.Specifics.actualDate),a=e("input",t),c=a.attr("name").replace("[model]","["+i.Specifics.actualDate+"]");t.insertBefore(i.Specifics.$add).show(),a.attr("name",c).focus()},checkDates:function(i){var t=e(".grid-days > span.atual",i.Specifics.$calendar).removeClass("selected");i.Specifics.$horarios.find(".line-value").each(function(){if(this.$=this.$||e(this),this.$f=this.$f||this.$.children("input"),""!==this.$f.val()&&5===this.$f.val().length){var i=t.filter('[rel="'+this.$.attr("rel")+'"]');i.length&&i.addClass("selected")}});!!i.Specifics.actualDate&&t.filter('[rel="'+i.Specifics.actualDate+'"]').length?i.Specifics.$horarios.slideDown():i.Specifics.$horarios.slideUp()}}},e(function(){"function"==typeof window.fieldset_field_set_callback&&window.fieldset_field_set_callback(ScheduleField.init),ScheduleField.init()})}(jQuery);