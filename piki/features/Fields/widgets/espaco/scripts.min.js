!function($){$.fn.Espaco=function(method){var pluginArgs=arguments;return this.each(function(){var _this=this,$this=$(this);this.configure=function(){if(this.unidades=$("select.unidade",$this),this.espacos=$("select.espaco",$this),this.preloader=$(".preloader",$this),""!==this.unidades.val()&&""===this.espacos.val()){var i=this.espacos.val();this.changeUnidade(),this.espacos.val(i)}this.unidades.on("change",function(){_this.changeUnidade()}),this.ready=!0},this.changeUnidade=function(){this.clearEspacos(),this.getEspacos()},this.clearEspacos=function(){this.espacos.find("option").first();this.preloader.css("display","inline-table"),this.clearField(this.espacos),this.disableField(this.espacos),this.disableField(this.unidades)},this.enableField=function(i){i.is(".piki-select")?i.get(0).enable():i.prop("disabled",!1)},this.disableField=function(i){i.is(".piki-select")?i.get(0).disable():i.prop("disabled","disabled")},this.clearField=function(i){i.is(".piki-select")?i.get(0).removeItems():i.children("option").first().siblings().remove()},this.getEspacos=function(){if("0"==this.unidades.val())return this.clearEspacos(),this.enableField(this.unidades),this.disableField(this.espacos),void this.preloader.css("display","none");$.ajax({type:"POST",url:Piki.ajaxurl,dataType:"JSON",data:{action:"piki_field_ajax",field_type:"espaco",field_action:"ajax_get_espacos",unidade:_this.unidades.val()},beforeSend:function(i){i.overrideMimeType("text/plain; charset=utf-8")}}).done(function(i){_this.pululateEspacos(i),_this.enableField(_this.unidades),_this.preloader.css("display","none")})},this.pululateEspacos=function(i){_this.clearField(this.espacos),0!==i?(_this.espacos.is(".piki-select")?_this.espacos.get(0).populate(i,!0):$.each(i,function(i,s){_this.espacos.append('<option value="'+i+'">'+s+"</option>")}),_this.enableField(_this.espacos)):_this.enableField(_this.espacos)};var toCall;if("object"==typeof method)this.configure.apply(this,pluginArgs);else if(void 0===(toCall=eval("this."+method))){if(void 0!==this.ready)return;this.configure.apply(this,pluginArgs)}else toCall.apply(this,Array.prototype.slice.call(pluginArgs,1))})},window.initEspacosField=function(){$(".linha-field.ftype-espaco > .field-item").Espaco()},$(function(){window.initEspacosField(),window.fieldset_field_set_callback(window.initEspacosField)})}(jQuery);