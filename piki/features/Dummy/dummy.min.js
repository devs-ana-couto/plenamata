!function(t){t.fn.PKDummy=function(e,a,o){return this.each(function(){var s=t(this),u=s.data("PKDummy");if(void 0==e&&(e="configure"),"configure"!=e||void 0==u)switch(e){case"configure":if(!t("body").hasClass("piki_page_piki-dummys"))return!1;u={wrapper:s,button:t("input#field_dummys_build"),posts:!1,status:t(".status",s),currentPost:!1},s.data("PKDummy",u),u.typeSelect=t("#piki_dummys_post_type",s),u.total=t("#piki_dummys_total",s),u.button.on("click",function(t){t.preventDefault(),""!==u.typeSelect.val()?u.button.is(".loading")||(u.button.addClass("loading").prop("disabled",!0).removeClass("button-primary"),s.PKDummy("setStatus","loading","Gerando conteúdo"),s.PKDummy("generateContent")):alert("Selecione um tipo de Post!")}),t("form").on("submit",function(t){t.preventDefault(),u.button.trigger("click")});break;case"generateContent":t.ajax({type:"POST",dataType:"JSON",url:ajaxurl,data:{action:"piki_dummys_generate",post_type:u.typeSelect.val(),total:u.total.val()}}).done(function(t){"error"==t.status?s.PKDummy("setStatus","error","Aconteceu um erro inesperado. Consulte o administrador do sistema."):(u.typeSelect.val(""),s.PKDummy("setStatus","success","Conteúdo gerado com sucesso.")),u.button.removeClass("loading").prop("disabled",!1).addClass("button-primary")});break;case"setStatus":u.status.removeClass("error success normal loading").addClass(a).html(o).slideDown()}})},t(function(){t("#pikiforms_dummys_build").PKDummy()})}(jQuery);