var Capas;!function(e){Capas={$:null,$switcher:null,$form:null,$content:null,scrollOffset:null,post_id:null,actualType:null,init:function(){if(this.$=e("#asn-capa-builder"),!this.$.length)return!0;this.$form=e("form#post"),this.post_id=e("input#post_ID",this.$form).val(),this.$content=e("#sticky-content",this.$),this.$content.on("click","a",function(t){t.preventDefault()}),this.scrollOffset=e("#wpadminbar").outerHeight(),this.$switcher=e("select#template",this.$),this.$switcher.on("change",function(){Capas.requestCapa(this.value)}),this.bindCapa()},requestCapa:function(t){Loader();t={action:"capas_get_capa",post_id:Capas.post_id,template:t};e.ajax({url:Piki.ajaxurl,type:"POST",data:t}).done(function(t){Loader("close"),Capas.$content.fadeOut(300).html(t).fadeIn(function(){Capas.bindCapa(),window.scroll({top:Capas.$.offset().top-Capas.scrollOffset,behavior:"smooth"})})}).fail(function(t){Loader("close"),Message.open(t.responseText)})},bindCapa:function(){this.$.on("select",'button[data-action="post-select-open"]',function(t,a){Capas.getTeaser(a)})},getTeaser:function(a){Loader();var t={action:"capas_get_teaser",parent_id:Capas.post_id,post_id:a.$target.val(),template:a.template,group:a.group};e.ajax({url:Piki.ajaxurl,type:"POST",data:t}).done(function(t){Loader("close"),$parent=a.$.parent(),$html=e(t).insertAfter($parent),$parent.remove()}).fail(function(t){Loader("close"),Message.open(t.responseText)})}},e(function(){Capas.init()})}(jQuery);
//# sourceMappingURL=capas.js.map
